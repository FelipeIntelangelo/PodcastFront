<div class="profile-container">
  @if (isLoading) {
    <div class="loading-spinner">Loading profile...</div>
  }

  @if (error) {
    <div class="error-message">{{ error }}</div>
  }

  @if (user) {
    <div class="user-profile">
      <div class="profile-header">
        <img [src]="user.profilePicture || 'assets/default-pfp.png'" alt="Profile Picture" class="profile-picture">
        @if (isFullUser(user)) {
          <h2>{{ user.name }} {{ user.lastName }} ({{ user.nickname }})</h2>
        } @else {
          <h2>{{ user.nickname }}</h2>
        }
      </div>

      <div class="profile-details">
        @if (isFullUser(user)) {
          <p><strong>Username:</strong> {{ user.credential.username }}</p>
          <p><strong>Email:</strong> {{ user.credential.email }}</p>
          <p><strong>Bio:</strong> {{ user.bio }}</p>
          @if (isAdmin) {
            <p><strong>Member Since:</strong> {{ user.credential.createdAt | date:'mediumDate' }}</p>
            <p><strong>Roles:</strong> {{ user.credential.roles.join(', ') }}</p>
          }
        } @else {
          @if (user.bio) {
            <p><strong>Bio:</strong> {{ user.bio }}</p>
          }
        }

        <!-- Optional: Display counts for lists if they exist (only for full User) -->
        @if (isFullUser(user)) {
          @if (user.podcasts?.length) {
            <p><strong>Podcasts:</strong> {{ user.podcasts?.length }}</p>
          }
          @if (user.favorites?.length) {
            <p><strong>Favorites:</strong> {{ user.favorites?.length }}</p>
          }
          @if (user.ratings?.length) {
            <p><strong>Ratings:</strong> {{ user.ratings?.length }}</p>
          }
        }
      </div>
    </div>
  }
</div>
